<h2>Top Product Sold</h2>

<%= button_to 'Today',sold_products_path({start:Date.today, end:Date.today+1}), method: :get%>

<%= form_with url: "/dashboard/sold_products",method: :get do |f| %>
  <%= f.label "start" %>
  <%= f.date_field :start, value: @start_date%>
  <span> -- </span>
  <%= f.label "end" %>
  <%= f.date_field :end, value: @end_date%>
  <%= f.submit 'Sort' %>
<% end %>

<%= @array_total_quantity%>

<table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Product Name
        <%= form_with url: "/dashboard/sold_products",method: :get do |f| %>
          <%= f.hidden_field :start, value:@start_date %>
          <%= f.hidden_field :end, value:@end_date %>
          <select name="sort" id="sort">
            <option value= "">select</option>
            <option value= "product_asc">ascending</option>
            <option value="product_desc">descending</option>
          </select>
          <%= f.submit "sort" %>
        <% end %>
      </th>
      <th scope="col">Price
        <%= form_with url: "/dashboard/sold_products",method: :get do |f| %>
          <%= f.hidden_field :start, value:@start_date %>
          <%= f.hidden_field :end, value:@end_date %>
          <select name="sort" id="sort">
            <option value= "">select</option>
            <option value= "price_asc">ascending</option>
            <option value="price_desc">descending</option>
          </select>
          <%= f.submit "sort" %>
        <% end %>
      </th>
      <th scope="col">Quantity
        <%= form_with url: "/dashboard/sold_products",method: :get do |f| %>
          <%= f.hidden_field :start, value:@start_date %>
          <%= f.hidden_field :end, value:@end_date %>
          <select name="sort" id="sort">
            <option value= "">select</option>
            <option value= "quantity_asc">ascending</option>
            <option value="quantity_desc">descending</option>
          </select>
          <%= f.submit "sort" %>
        <% end %>
      </th>
      <th scope="col">Total Price
        <%= form_with url: "/dashboard/sold_products",method: :get do |f| %>
          <%= f.hidden_field :start, value:@start_date %>
          <%= f.hidden_field :end, value:@end_date %>
          <select name="sort" id="sort">
            <option value= "">select</option>
            <option value= "total_price_asc">ascending</option>
            <option value="total_price_desc">descending</option>
          </select>
          <%= f.submit "sort" %>
        <% end %>      
      </th>
    </tr>
  </thead>
  <tbody>
  <% @Product_Report.each_with_index do |product,idx|%>
        <tr>
          <td><%= idx + 1%> </td>
          <td><%= product[:product_name]%> </td>
          <td><%= product[:price]%> </td>
          <td><%= product[:quantity] == nil ? 0 : product[:quantity]%></td>
          <td><%= product[:sold_price] == nil ? 0 : product[:sold_price]%></td>
        </tr>
    <%end%>
  </tbody>
</table>


</br></br>